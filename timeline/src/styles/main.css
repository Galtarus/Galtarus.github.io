:root{
  --bg:#0b0f14;
  --panel:#101826;
  --card:#0f1723;
  --text:#e6edf3;
  --muted:#9fb0c0;
  --border:rgba(255,255,255,.10);
  --accent:#7dd3fc;
  --accent2:#a78bfa;
  --danger:#fb7185;
  --shadow:0 10px 30px rgba(0,0,0,.35);

  /* Layout heights (used for viewport math)
     Keep these compact: the timeline is the product, not the chrome. */
  --header-h: 34px;
  /* Timeline view now uses a single compact header row (zoom moved into header). */
  --toolbar-h: 0px;
  --bottom-nav-h: 0px;

  /* Where the axis sits vertically inside its viewport.
     Keep it near the middle so the timeline uses vertical space better (especially on large screens)
     and cards can breathe both above AND below without feeling “stuck” near the bottom. */
  /* Move the axis slightly upward so the first impression isn’t a huge empty top half on desktop. */
  --axis-center: 46%;

  color-scheme: dark;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background: radial-gradient(1200px 600px at 30% -10%, rgba(125,211,252,.25), transparent 50%),
              radial-gradient(900px 500px at 90% 20%, rgba(167,139,250,.20), transparent 55%),
              var(--bg);
  color:var(--text);
  font: 14px/1.45 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}

a{color:inherit}
button,input,select,textarea{font:inherit;color:inherit}

#app{min-height:100%;}

/* Layout */
.shell{min-height:100%;display:flex;flex-direction:column}
.header{
  position:sticky;top:0;z-index:10;
  background:rgba(11,15,20,.72);
  backdrop-filter: blur(10px);
  border-bottom:1px solid var(--border);
}
.header-inner{max-width:1200px;margin:0 auto;padding:4px 16px;display:flex;gap:12px;align-items:center;height:var(--header-h)}
.brand{display:flex;align-items:center;gap:10px}
.brand h1{font-size:14px;margin:0;letter-spacing:.35px}
.badge{font-size:12px;color:var(--muted);border:1px solid var(--border);padding:2px 8px;border-radius:999px}
.header-center{flex:1;display:flex;align-items:center;justify-content:center;min-width:0}
.header-actions{display:flex;gap:8px;align-items:center}

.main{max-width:1200px;margin:0 auto;padding:16px;display:grid;gap:16px}

.main.axis-only{max-width:none;padding:0}

/* Desktop: horizontal timeline + side panel */
@media (min-width: 880px){
  .main{grid-template-columns: 1.3fr .9fr; align-items:start}
  .main.axis-only{grid-template-columns:1fr}
  .bottom-nav{display:none}
}

/* Mobile: vertical timeline + bottom nav */
@media (max-width: 879px){
  :root{ --bottom-nav-h: 54px; }
  .main{grid-template-columns: 1fr}
  .right-panel{order: -1}
  .header-actions .hide-mobile{display:none}
  .header-center{display:none}
  .bottom-nav{position:sticky;bottom:0;z-index:10;background:rgba(11,15,20,.75);backdrop-filter: blur(10px);border-top:1px solid var(--border)}
  .bottom-nav-inner{max-width:1200px;margin:0 auto;display:flex}
  .bottom-nav a{flex:1;text-align:center;padding:12px 8px;text-decoration:none;color:var(--muted)}
  .bottom-nav a[aria-current="page"]{color:var(--text)}
}

.panel{background:rgba(16,24,38,.75);border:1px solid var(--border);border-radius:16px;box-shadow:var(--shadow)}
.panel h2{margin:0;padding:12px 14px;border-bottom:1px solid var(--border);font-size:13px;color:var(--muted);letter-spacing:.08em;text-transform:uppercase}
.panel-body{padding:14px}

.btn{
  border:1px solid var(--border);
  background:rgba(255,255,255,.04);
  padding:6px 10px;
  border-radius:10px;
  cursor:pointer;
}
.btn:hover{background:rgba(255,255,255,.07)}
.btn:focus-visible{outline:2px solid rgba(125,211,252,.45); outline-offset:2px}
.btn.primary{border-color:rgba(125,211,252,.35);background:rgba(125,211,252,.12)}
.btn.danger{border-color:rgba(251,113,133,.35);background:rgba(251,113,133,.10)}

.input{width:100%;border:1px solid var(--border);background:rgba(0,0,0,.18);padding:9px 10px;border-radius:10px}
.input:focus-visible{outline:2px solid rgba(125,211,252,.45); outline-offset:2px}

/* Timeline */
.tag{font-size:12px;color:var(--muted);border:1px solid var(--border);padding:2px 8px;border-radius:999px}

.axis-toolbar{
  position:sticky;
  top: var(--header-h);
  z-index:9;
  display:flex;align-items:center;justify-content:space-between;gap:12px;
  flex-wrap: nowrap;
  padding:4px 10px;
  height: var(--toolbar-h);
  background:rgba(11,15,20,.62);
  backdrop-filter: blur(10px);
  border-bottom:1px solid rgba(255,255,255,.08);
}
.axis-hint{
  color:var(--muted);
  font-size:11px;
  line-height:1.2;
  flex: 1;
  text-align:right;
  white-space: nowrap;
  overflow:hidden;
  text-overflow: ellipsis;
}

/* Slightly calmer overall visuals (less "glow") */
.axis-line{opacity:.75}
.axis-viewport{background:transparent}

.zoom{display:flex;gap:8px;align-items:center}
.zoom-label{min-width:96px;text-align:center;color:var(--muted);font-size:12px;border:1px solid var(--border);padding:5px 10px;border-radius:999px}

/* Header-embedded zoom controls (timeline view). */
.header-zoom .btn{padding:4px 9px;border-radius:999px}
.header-zoom .zoom-label{min-width:0;padding:4px 10px}

.axis-empty{color:var(--muted);padding:14px;border:1px dashed rgba(255,255,255,.14);border-radius:14px;margin:14px}

.axis-viewport{
  /* Fit exactly in the remaining visible area (prevents the axis from sitting "too low") */
  height: calc(100dvh - var(--header-h) - var(--toolbar-h) - var(--bottom-nav-h));
  overflow:auto;
  overscroll-behavior: contain;
  border:0;
  border-radius: 0;
  background:transparent;
  scrollbar-width: thin;
  touch-action: pan-x;
  cursor: grab;
  position: relative;
}
.axis-viewport.is-panning{cursor: grabbing}

.axis-onboard{
  position:absolute;
  right:14px;
  bottom:14px;
  z-index: 2;
  pointer-events:none;

  display:flex;
  align-items:center;
  gap:8px;
  padding:7px 10px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.12);
  background: rgba(0,0,0,.28);
  backdrop-filter: blur(6px);

  color: rgba(230,237,243,.78);
  font-size: 12px;
  line-height: 1;
  text-shadow: 0 10px 22px rgba(0,0,0,.55);
}
.axis-onboard kbd{
  font: 11px/1.1 ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  color: rgba(230,237,243,.80);
  padding: 2px 7px;
  border-radius: 7px;
  border: 1px solid rgba(255,255,255,.16);
  background: rgba(255,255,255,.06);
}

.axis-track{position:relative;height:100%}
.axis-line{
  position:absolute;left:0;right:0;top:var(--axis-center);height:3px;
  background:linear-gradient(90deg, transparent, rgba(125,211,252,.38), rgba(167,139,250,.38), transparent);
  transform: translateY(-1.5px);
}

.axis-tick{position:absolute;top:var(--axis-center);transform: translate(-50%, -50%);pointer-events:none}
.axis-tick-line{
  width:1px;
  height: clamp(34px, 6vh, 64px);
  background:rgba(255,255,255,.46);
  margin:0 auto;
}
.axis-tick-label{
  margin-top:6px;
  white-space:nowrap;
  font-size:13px;
  font-weight:600;
  color:rgba(230,237,243,.95);
  text-shadow:0 2px 12px rgba(0,0,0,.65);
  padding:2px 8px;
  border-radius:999px;
  background: rgba(0,0,0,.22);
  border: 1px solid rgba(255,255,255,.08);
}

.axis-node{
  position:absolute;
  top:var(--axis-center);
  width:52px;
  height:52px;
  outline:none;
  cursor:pointer;
  /* Stagger nodes vertically (uses the big empty space, improves density/legibility). */
  transform: translate(-50%, -50%);
}
/* Spread nodes/cards farther from the axis to use vertical space better on large screens.
   Use clamp() so small screens don’t get pushed too far, but tall screens feel “filled”. */
:root{
  /* Keep nodes/cards closer to the axis by default.
     The previous offsets created a lot of dead vertical space on wide desktop screens,
     making the timeline feel sparse and harder to scan. */
  --node-offset: clamp(18px, 3vh, 48px);
  --card-offset: calc(var(--node-offset) + clamp(22px, 4vh, 72px));

  /* Lane stacking: when events are dense, we push nodes into multiple “lanes” above/below
     the axis instead of letting them visually sit on top of each other. */
  --lane-step: clamp(34px, 4.2vh, 54px);
}

.axis-node.up{transform: translate(-50%, -50%) translateY(calc(-1 * (var(--node-offset) + (var(--lane,0) * var(--lane-step)))))}
.axis-node.down{transform: translate(-50%, -50%) translateY(calc(var(--node-offset) + (var(--lane,0) * var(--lane-step))))}

.axis-stem{
  pointer-events:none;
  position:absolute;
  left:50%;
  width:2px;
  background:rgba(255,255,255,.16);
  transform: translateX(-50%);
  border-radius: 2px;
}
.axis-node.up .axis-stem{ top:50%; height: calc(var(--node-offset) + (var(--lane,0) * var(--lane-step))); }
.axis-node.down .axis-stem{ top:calc(50% - (var(--node-offset) + (var(--lane,0) * var(--lane-step)))); height: calc(var(--node-offset) + (var(--lane,0) * var(--lane-step))); }

.axis-node .axis-dot{
  pointer-events:none;
  position:absolute;
  left:50%;
  top:50%;
  width:14px;
  height:14px;
  border-radius:999px;
  transform: translate(-50%, -50%);

  /* Default: solid accent dot. If --dot-img is provided, this becomes a thumbnail. */
  background: var(--dot-color, rgba(125,211,252,.95));
  background-image: var(--dot-img);
  background-size: cover;
  background-position: center;

  box-shadow:0 0 0 5px rgba(125,211,252,.14), 0 14px 35px rgba(0,0,0,.5);
}

.axis-node .axis-dot.has-media{
  width:26px;
  height:26px;
  border:1px solid rgba(255,255,255,.22);
  /* Subtle base so transparent images don’t disappear. */
  background-color: rgba(125,211,252,.18);
}

.axis-node.is-current .axis-dot{
  --dot-color: rgba(167,139,250,.95);
  box-shadow:0 0 0 6px rgba(167,139,250,.16), 0 18px 45px rgba(0,0,0,.6);
}

.axis-label{
  position:absolute;left:50%;
  transform: translateX(-50%) translateY(0);
  width:max-content;
  max-width: 260px;
  padding:8px 10px;
  border:1px solid rgba(255,255,255,.14);
  border-radius:14px;
  background:rgba(0,0,0,.30);
  backdrop-filter: blur(6px);
  pointer-events:none;

  /* Reduce clutter on dense timelines: show labels on hover/focus/current only. */
  opacity: 0;
  transition: opacity 120ms ease, transform 120ms ease;
}
.axis-node:hover .axis-label,
.axis-node:focus-visible .axis-label,
.axis-node.is-current .axis-label{
  opacity: 1;
  transform: translateX(-50%) translateY(-2px);
}

/* Avoid duplicated information: the current entry already has a full card. */
.axis-node.is-current .axis-label{display:none}

/* At maximum zoom, default to visible labels (better first impression). */
.zoom-detail .axis-label{
  opacity: 1;
  transform: translateX(-50%) translateY(-2px);
}
.axis-node.up .axis-label{bottom: 46px}
.axis-node.down .axis-label{top: 46px}
.axis-label-top{display:flex;gap:8px;align-items:center;justify-content:space-between}
.axis-label-date{font-size:11px;color:rgba(230,237,243,.64)}
.axis-label-title{margin-top:2px;font-size:13px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:260px}
.axis-label-sub{margin-top:2px;font-size:12px;color:rgba(230,237,243,.72);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:260px}

.media-chip{
  font-size:11px;
  padding:2px 7px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.18);
  color:rgba(230,237,243,.78);
  background:rgba(255,255,255,.06);
}
.media-chip.yt{border-color:rgba(125,211,252,.28); background:rgba(125,211,252,.10)}
.media-chip.img{border-color:rgba(167,139,250,.28); background:rgba(167,139,250,.10)}

.axis-card{
  position:absolute;left:50%;transform: translateX(-50%);
  width:280px;
  border:1px solid rgba(255,255,255,.14);
  border-radius:14px;
  padding:11px 12px;
  background:rgba(15,23,35,.90);
  box-shadow:var(--shadow);
}
.axis-node.up .axis-card{bottom: calc(var(--card-offset) + (var(--lane,0) * var(--lane-step)))}
.axis-node.down .axis-card{top: calc(var(--card-offset) + (var(--lane,0) * var(--lane-step)))}

.axis-card .date{color:rgba(230,237,243,.70);font-size:12px}
.axis-card .title{margin-top:6px;font-size:15px;line-height:1.25}
.axis-card .sub{margin-top:6px;color:rgba(230,237,243,.82); font-size:13px}

.media-thumb{margin-top:10px;width:100%;height:auto;border-radius:12px;display:block;border:1px solid rgba(255,255,255,.12)}

/* Smaller previews for hover labels on the horizontal axis (keeps the axis scannable). */
.axis-label .media-thumb.small{
  margin-top: 8px;
  width: min(220px, 70vw);
  max-height: 120px;
  object-fit: cover;
}

.axis-node:focus-visible .axis-dot{outline:2px solid rgba(125,211,252,.55);outline-offset:2px}
.axis-node[aria-current="true"] .axis-card{outline:2px solid rgba(167,139,250,.35)}

@media (max-width: 879px){
  :root{ --axis-center: 50%; }
  .axis-toolbar{flex-wrap:wrap;height:auto}
  .axis-hint{white-space:normal;text-align:left;flex-basis:100%}

  /* Mobile = vertical timeline */
  .axis-viewport{display:none}
  .vt-viewport{
    height: calc(100dvh - var(--header-h) - var(--toolbar-h) - var(--bottom-nav-h));
    overflow:auto;
    overscroll-behavior: contain;
    padding: 14px 14px 24px;
  }
  .vt-track{position:relative; padding-left: 18px}
  .vt-track::before{
    content:"";
    position:absolute; left: 8px; top: 0; bottom: 0;
    width: 2px;
    background: linear-gradient(180deg, transparent, rgba(125,211,252,.35), rgba(167,139,250,.35), transparent);
  }

  /* Sticky separators: YEAR + MONTH.
     Two-level structure makes long mobile timelines instantly scannable. */
  .vt-year,
  .vt-month{
    position: sticky;
    margin: 6px 0 10px 18px;
    width: fit-content;
    max-width: calc(100% - 18px);

    padding: 6px 10px;
    border-radius: 999px;
    border: 1px solid rgba(255,255,255,.14);
    background: rgba(0,0,0,.38);
    backdrop-filter: blur(6px);

    color: rgba(230,237,243,.90);
    font-size: 12px;
    letter-spacing: .04em;
    text-shadow: 0 10px 22px rgba(0,0,0,.55);
    box-shadow: 0 16px 34px rgba(0,0,0,.35);
  }

  .vt-year{
    top: 0;
    z-index: 3;
    font-weight: 700;
    border-color: rgba(167,139,250,.22);
    background: rgba(167,139,250,.12);
  }

  .vt-month{
    /* Sits below the year chip when both are stuck. */
    top: 32px;
    z-index: 2;
    border-color: rgba(125,211,252,.20);
  }

  /* Floating “Latest” button: gives users a quick escape hatch back to the newest entry. */
  .vt-fab{
    position: fixed;
    right: 14px;
    bottom: calc(var(--bottom-nav-h) + 14px);
    z-index: 20;

    border: 1px solid rgba(125,211,252,.30);
    background: rgba(125,211,252,.12);
    color: rgba(230,237,243,.98);

    padding: 10px 12px;
    border-radius: 999px;
    box-shadow: 0 18px 45px rgba(0,0,0,.55);

    opacity: 0;
    transform: translateY(8px);
    pointer-events: none;
    transition: opacity 140ms ease, transform 140ms ease;
  }
  .vt-fab.show{
    opacity: 1;
    transform: translateY(0);
    pointer-events: auto;
  }
  .vt-fab:focus-visible{outline:2px solid rgba(125,211,252,.55); outline-offset:2px}

  .vt-item{position:relative; display:grid; grid-template-columns: 1fr; gap:10px; padding: 10px 0; scroll-margin-top: 76px}
  .vt-dot{
    position:absolute; left: 8px; top: 22px;
    width: 12px; height: 12px; border-radius:999px;
    transform: translate(-50%, -50%);
    background: rgba(125,211,252,.92);
    box-shadow: 0 0 0 5px rgba(125,211,252,.14), 0 10px 28px rgba(0,0,0,.5);
  }
  .vt-item.is-current .vt-dot{background: rgba(167,139,250,.95); box-shadow: 0 0 0 6px rgba(167,139,250,.16), 0 14px 34px rgba(0,0,0,.55)}

  .vt-card{
    margin-left: 18px;
    border:1px solid rgba(255,255,255,.14);
    border-radius: 14px;
    padding: 10px 12px;
    background: rgba(15,23,35,.86);
    box-shadow: var(--shadow);
  }
  .vt-top{display:flex;align-items:center;justify-content:space-between;gap:10px}
  .vt-date{font-size:12px;color:rgba(230,237,243,.70)}
  .vt-title{margin-top:6px;font-size:15px;line-height:1.25}
  .vt-sub{margin-top:6px;color:rgba(230,237,243,.82); font-size:13px}
  .vt-card .media-thumb{margin-top:10px}
}

/* Detail */
.kv{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:10px}
.kv .pill{border:1px solid var(--border);border-radius:999px;padding:3px 10px;color:var(--muted)}
.detail h3{margin:0 0 10px 0;font-size:18px}
.detail p{margin:0 0 10px 0;color:var(--text)}
.detail .muted{color:var(--muted)}

.embed-shell{margin-top:12px;border:1px dashed rgba(255,255,255,.18);border-radius:14px;padding:12px;background:rgba(0,0,0,.15)}
.embed-shell button{width:100%}
.embed-frame{width:100%;aspect-ratio:16/9;border:0;border-radius:12px;margin-top:10px}

.footer-note{color:var(--muted);font-size:12px;margin-top:8px}

/* Utilities */
.row{display:flex;gap:10px;align-items:center}
.row.wrap{flex-wrap:wrap}
.stack{display:grid;gap:10px}
.hr{height:1px;background:var(--border);margin:10px 0}

.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
