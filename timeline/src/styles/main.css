:root{
  --bg:#0b0f14;
  --panel:#101826;
  --card:#0f1723;
  --text:#e6edf3;
  --muted:#9fb0c0;
  --border:rgba(255,255,255,.10);
  --accent:#7dd3fc;
  --accent2:#a78bfa;
  --danger:#fb7185;
  --shadow:0 10px 30px rgba(0,0,0,.35);

  /* Layout heights (used for viewport math)
     Keep these compact: the timeline is the product, not the chrome. */
  --header-h: 34px;
  --toolbar-h: 34px;
  --bottom-nav-h: 0px;

  /* Where the axis sits vertically inside its viewport.
     With staggered nodes, keep it closer to center for balance. */
  --axis-center: 44%;

  color-scheme: dark;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background: radial-gradient(1200px 600px at 30% -10%, rgba(125,211,252,.25), transparent 50%),
              radial-gradient(900px 500px at 90% 20%, rgba(167,139,250,.20), transparent 55%),
              var(--bg);
  color:var(--text);
  font: 14px/1.45 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}

a{color:inherit}
button,input,select,textarea{font:inherit;color:inherit}

#app{min-height:100%;}

/* Layout */
.shell{min-height:100%;display:flex;flex-direction:column}
.header{
  position:sticky;top:0;z-index:10;
  background:rgba(11,15,20,.72);
  backdrop-filter: blur(10px);
  border-bottom:1px solid var(--border);
}
.header-inner{max-width:1200px;margin:0 auto;padding:4px 16px;display:flex;gap:12px;align-items:center;height:var(--header-h)}
.brand{display:flex;align-items:center;gap:10px}
.brand h1{font-size:14px;margin:0;letter-spacing:.35px}
.badge{font-size:12px;color:var(--muted);border:1px solid var(--border);padding:2px 8px;border-radius:999px}
.spacer{flex:1}
.header-actions{display:flex;gap:8px;align-items:center}

.main{max-width:1200px;margin:0 auto;padding:16px;display:grid;gap:16px}

.main.axis-only{max-width:none;padding:0}

/* Desktop: horizontal timeline + side panel */
@media (min-width: 880px){
  .main{grid-template-columns: 1.3fr .9fr; align-items:start}
  .main.axis-only{grid-template-columns:1fr}
  .bottom-nav{display:none}
}

/* Mobile: vertical timeline + bottom nav */
@media (max-width: 879px){
  :root{ --bottom-nav-h: 54px; }
  .main{grid-template-columns: 1fr}
  .right-panel{order: -1}
  .header-actions .hide-mobile{display:none}
  .bottom-nav{position:sticky;bottom:0;z-index:10;background:rgba(11,15,20,.75);backdrop-filter: blur(10px);border-top:1px solid var(--border)}
  .bottom-nav-inner{max-width:1200px;margin:0 auto;display:flex}
  .bottom-nav a{flex:1;text-align:center;padding:12px 8px;text-decoration:none;color:var(--muted)}
  .bottom-nav a[aria-current="page"]{color:var(--text)}
}

.panel{background:rgba(16,24,38,.75);border:1px solid var(--border);border-radius:16px;box-shadow:var(--shadow)}
.panel h2{margin:0;padding:12px 14px;border-bottom:1px solid var(--border);font-size:13px;color:var(--muted);letter-spacing:.08em;text-transform:uppercase}
.panel-body{padding:14px}

.btn{
  border:1px solid var(--border);
  background:rgba(255,255,255,.04);
  padding:6px 10px;
  border-radius:10px;
  cursor:pointer;
}
.btn:hover{background:rgba(255,255,255,.07)}
.btn:focus-visible{outline:2px solid rgba(125,211,252,.45); outline-offset:2px}
.btn.primary{border-color:rgba(125,211,252,.35);background:rgba(125,211,252,.12)}
.btn.danger{border-color:rgba(251,113,133,.35);background:rgba(251,113,133,.10)}

.input{width:100%;border:1px solid var(--border);background:rgba(0,0,0,.18);padding:9px 10px;border-radius:10px}
.input:focus-visible{outline:2px solid rgba(125,211,252,.45); outline-offset:2px}

/* Timeline */
.tag{font-size:12px;color:var(--muted);border:1px solid var(--border);padding:2px 8px;border-radius:999px}

.axis-toolbar{
  position:sticky;
  top: var(--header-h);
  z-index:9;
  display:flex;align-items:center;justify-content:space-between;gap:12px;
  flex-wrap: nowrap;
  padding:4px 10px;
  height: var(--toolbar-h);
  background:rgba(11,15,20,.62);
  backdrop-filter: blur(10px);
  border-bottom:1px solid rgba(255,255,255,.08);
}
.axis-hint{
  color:var(--muted);
  font-size:11px;
  line-height:1.2;
  flex: 1;
  text-align:right;
  white-space: nowrap;
  overflow:hidden;
  text-overflow: ellipsis;
}

/* Slightly calmer overall visuals (less "glow") */
.axis-line{opacity:.75}
.axis-viewport{background:transparent}

.zoom{display:flex;gap:8px;align-items:center}
.zoom-label{min-width:96px;text-align:center;color:var(--muted);font-size:12px;border:1px solid var(--border);padding:5px 10px;border-radius:999px}

.axis-empty{color:var(--muted);padding:14px;border:1px dashed rgba(255,255,255,.14);border-radius:14px;margin:14px}

.axis-viewport{
  /* Fit exactly in the remaining visible area (prevents the axis from sitting "too low") */
  height: calc(100dvh - var(--header-h) - var(--toolbar-h) - var(--bottom-nav-h));
  overflow:auto;
  overscroll-behavior: contain;
  border:0;
  border-radius: 0;
  background:transparent;
  scrollbar-width: thin;
  touch-action: pan-x;
  cursor: grab;
}
.axis-viewport.is-panning{cursor: grabbing}

.axis-track{position:relative;height:100%}
.axis-line{
  position:absolute;left:0;right:0;top:var(--axis-center);height:3px;
  background:linear-gradient(90deg, transparent, rgba(125,211,252,.38), rgba(167,139,250,.38), transparent);
  transform: translateY(-1.5px);
}

.axis-tick{position:absolute;top:var(--axis-center);transform: translate(-50%, -50%);pointer-events:none}
.axis-tick-line{width:1px;height:38px;background:rgba(255,255,255,.30);margin:0 auto}
.axis-tick-label{margin-top:6px;white-space:nowrap;font-size:13px;font-weight:500;color:rgba(230,237,243,.92);text-shadow:0 2px 12px rgba(0,0,0,.65)}

.axis-node{
  position:absolute;
  top:var(--axis-center);
  width:52px;
  height:52px;
  outline:none;
  cursor:pointer;
  /* Stagger nodes vertically (uses the big empty space, improves density/legibility). */
  transform: translate(-50%, -50%);
}
.axis-node.up{transform: translate(-50%, -50%) translateY(-24px)}
.axis-node.down{transform: translate(-50%, -50%) translateY(24px)}

.axis-stem{
  pointer-events:none;
  position:absolute;
  left:50%;
  width:2px;
  background:rgba(255,255,255,.16);
  transform: translateX(-50%);
  border-radius: 2px;
}
.axis-node.up .axis-stem{ top:50%; height:24px; }
.axis-node.down .axis-stem{ top:calc(50% - 24px); height:24px; }

.axis-node .axis-dot{
  pointer-events:none;
  position:absolute;left:50%;top:50%;width:14px;height:14px;border-radius:999px;
  transform: translate(-50%, -50%);
  background:rgba(125,211,252,.95);
  box-shadow:0 0 0 5px rgba(125,211,252,.14), 0 14px 35px rgba(0,0,0,.5);
}
.axis-node.is-current .axis-dot{background:rgba(167,139,250,.95); box-shadow:0 0 0 6px rgba(167,139,250,.16), 0 18px 45px rgba(0,0,0,.6)}

.axis-label{
  position:absolute;left:50%;
  transform: translateX(-50%) translateY(0);
  width:max-content;
  max-width: 260px;
  padding:8px 10px;
  border:1px solid rgba(255,255,255,.14);
  border-radius:14px;
  background:rgba(0,0,0,.30);
  backdrop-filter: blur(6px);
  pointer-events:none;

  /* Reduce clutter on dense timelines: show labels on hover/focus/current only. */
  opacity: 0;
  transition: opacity 120ms ease, transform 120ms ease;
}
.axis-node:hover .axis-label,
.axis-node:focus-visible .axis-label,
.axis-node.is-current .axis-label{
  opacity: 1;
  transform: translateX(-50%) translateY(-2px);
}

/* At maximum zoom, default to visible labels (better first impression). */
.zoom-detail .axis-label{
  opacity: 1;
  transform: translateX(-50%) translateY(-2px);
}
.axis-node.up .axis-label{bottom: 46px}
.axis-node.down .axis-label{top: 46px}
.axis-label-top{display:flex;gap:8px;align-items:center;justify-content:space-between}
.axis-label-date{font-size:11px;color:rgba(230,237,243,.64)}
.axis-label-title{margin-top:2px;font-size:13px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:260px}
.axis-label-sub{margin-top:2px;font-size:12px;color:rgba(230,237,243,.72);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:260px}

.media-chip{
  font-size:11px;
  padding:2px 7px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.18);
  color:rgba(230,237,243,.78);
  background:rgba(255,255,255,.06);
}
.media-chip.yt{border-color:rgba(125,211,252,.28); background:rgba(125,211,252,.10)}
.media-chip.img{border-color:rgba(167,139,250,.28); background:rgba(167,139,250,.10)}

.axis-card{
  position:absolute;left:50%;transform: translateX(-50%);
  width:280px;
  border:1px solid rgba(255,255,255,.14);
  border-radius:14px;
  padding:11px 12px;
  background:rgba(15,23,35,.90);
  box-shadow:var(--shadow);
}
.axis-node.up .axis-card{bottom: 76px}
.axis-node.down .axis-card{top: 76px}

.axis-card .date{color:rgba(230,237,243,.70);font-size:12px}
.axis-card .title{margin-top:6px;font-size:15px;line-height:1.25}
.axis-card .sub{margin-top:6px;color:rgba(230,237,243,.82); font-size:13px}

.media-thumb{margin-top:10px;width:100%;height:auto;border-radius:12px;display:block;border:1px solid rgba(255,255,255,.12)}

.axis-node:focus-visible .axis-dot{outline:2px solid rgba(125,211,252,.55);outline-offset:2px}
.axis-node[aria-current="true"] .axis-card{outline:2px solid rgba(167,139,250,.35)}

@media (max-width: 879px){
  :root{ --axis-center: 50%; }
  .axis-toolbar{flex-wrap:wrap;height:auto}
  .axis-hint{white-space:normal;text-align:left;flex-basis:100%}

  /* Mobile = vertical timeline */
  .axis-viewport{display:none}
  .vt-viewport{
    height: calc(100dvh - var(--header-h) - var(--toolbar-h) - var(--bottom-nav-h));
    overflow:auto;
    overscroll-behavior: contain;
    padding: 14px 14px 24px;
  }
  .vt-track{position:relative; padding-left: 18px}
  .vt-track::before{
    content:"";
    position:absolute; left: 8px; top: 0; bottom: 0;
    width: 2px;
    background: linear-gradient(180deg, transparent, rgba(125,211,252,.35), rgba(167,139,250,.35), transparent);
  }
  .vt-item{position:relative; display:grid; grid-template-columns: 1fr; gap:10px; padding: 10px 0}
  .vt-dot{
    position:absolute; left: 8px; top: 22px;
    width: 12px; height: 12px; border-radius:999px;
    transform: translate(-50%, -50%);
    background: rgba(125,211,252,.92);
    box-shadow: 0 0 0 5px rgba(125,211,252,.14), 0 10px 28px rgba(0,0,0,.5);
  }
  .vt-item.is-current .vt-dot{background: rgba(167,139,250,.95); box-shadow: 0 0 0 6px rgba(167,139,250,.16), 0 14px 34px rgba(0,0,0,.55)}

  .vt-card{
    margin-left: 18px;
    border:1px solid rgba(255,255,255,.14);
    border-radius: 14px;
    padding: 10px 12px;
    background: rgba(15,23,35,.86);
    box-shadow: var(--shadow);
  }
  .vt-top{display:flex;align-items:center;justify-content:space-between;gap:10px}
  .vt-date{font-size:12px;color:rgba(230,237,243,.70)}
  .vt-title{margin-top:6px;font-size:15px;line-height:1.25}
  .vt-sub{margin-top:6px;color:rgba(230,237,243,.82); font-size:13px}
  .vt-card .media-thumb{margin-top:10px}
}

/* Detail */
.kv{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:10px}
.kv .pill{border:1px solid var(--border);border-radius:999px;padding:3px 10px;color:var(--muted)}
.detail h3{margin:0 0 10px 0;font-size:18px}
.detail p{margin:0 0 10px 0;color:var(--text)}
.detail .muted{color:var(--muted)}

.embed-shell{margin-top:12px;border:1px dashed rgba(255,255,255,.18);border-radius:14px;padding:12px;background:rgba(0,0,0,.15)}
.embed-shell button{width:100%}
.embed-frame{width:100%;aspect-ratio:16/9;border:0;border-radius:12px;margin-top:10px}

.footer-note{color:var(--muted);font-size:12px;margin-top:8px}

/* Utilities */
.row{display:flex;gap:10px;align-items:center}
.row.wrap{flex-wrap:wrap}
.stack{display:grid;gap:10px}
.hr{height:1px;background:var(--border);margin:10px 0}

.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
